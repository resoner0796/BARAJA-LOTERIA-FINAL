<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lotería Mexicana</title>
  <style>
    @font-face {
      font-family: 'BernardMT';
      src: url('BernardMT.ttf');
      font-weight: bold;
    }

    body {
      font-family: 'BernardMT', sans-serif;
      background-color: #fceabb;
      text-align: center;
      padding: 20px;
    }

    h1 {
      font-size: 2em;
      margin-bottom: 10px;
    }

    #cartaActual {
      font-size: 1.5em;
      margin: 20px;
    }

    #historial {
      margin-top: 20px;
    }

    .boton {
      font-family: 'BernardMT', sans-serif;
      font-size: 1.2em;
      padding: 10px 20px;
      margin: 10px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    .barajear { background-color: red; color: white; }
    .iniciar { background-color: green; color: white; }
    .detener { background-color: black; color: white; }

    img {
      width: 200px;
      height: auto;
      margin-top: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
    }

    input {
      margin-top: 15px;
      padding: 5px;
      font-size: 1em;
    }
  </style>
</head>
<body>
  <h1>Lotería Mexicana</h1>
  <div>
    <button class="boton barajear" onclick="barajearCartas()">Barajear</button>
    <button class="boton iniciar" onclick="iniciarJuego()">Iniciar Juego</button>
    <button class="boton detener" onclick="detenerJuego()">Detener Juego</button>
  </div>
  <div>
    <label for="velocidadInput">Velocidad (segundos): </label>
    <input type="number" id="velocidadInput" value="4" min="1" max="10"/>
  </div>
  <div id="cartaActual"></div>
  <img id="imagenCarta" src="" alt="Carta actual"/>
  <div id="historial"></div>

  <script>
    const cartas = Array.from({ length: 54 }, (_, i) => ({
      numero: i + 1,
      nombre: nombresCartas[i]
    }));

    const nombresCartas = [
      "El Gallo", "El Diablo", "La Dama", "El Catrín", "El Paraguas", "La Sirena", "La Escalera",
      "La Botella", "El Barril", "El Árbol", "El Melón", "El Valiente", "El Gorrito", "La Muerte",
      "La Pera", "La Bandera", "El Bandolón", "El Violoncello", "La Garza", "El Pájaro", "La Mano",
      "La Bota", "La Luna", "El Cotorro", "El Borracho", "El Negrito", "El Corazón", "La Sandía",
      "El Tambor", "El Camarón", "Las Jaras", "El Músico", "La Araña", "El Soldado", "La Estrella",
      "El Cazo", "El Mundo", "El Apache", "El Nopal", "El Alacrán", "La Rosa", "La Calavera",
      "La Campana", "El Cantarito", "El Venado", "El Sol", "La Corona", "La Chalupa", "El Pino",
      "El Pescado", "La Palma", "La Maceta", "El Arpa", "La Rana"
    ];

    let cartasBarajeadas = [];
    let cartaIndex = 0;
    let intervalo;

    function barajearCartas() {
      cartasBarajeadas = cartas.sort(() => 0.5 - Math.random());
      cartaIndex = 0;
      document.getElementById("historial").innerHTML = "";
      document.getElementById("cartaActual").innerText = "";
      document.getElementById("imagenCarta").src = "";
    }

    function mostrarCarta(carta) {
      document.getElementById("cartaActual").innerText = carta.nombre;
      document.getElementById("imagenCarta").src = `baraja/${String(carta.numero).padStart(2, '0')}.png`;

      const historial = document.getElementById("historial");
      const nuevaEntrada = document.createElement("div");
      nuevaEntrada.textContent = carta.nombre;
      historial.appendChild(nuevaEntrada);
    }

    function cantarCarta(nombre, esPrimera = false) {
      const mensaje = new SpeechSynthesisUtterance();
      mensaje.text = esPrimera ? `Corre y se va con... ${nombre}` : nombre;
      mensaje.lang = "es-MX";
      speechSynthesis.cancel();
      speechSynthesis.speak(mensaje);
    }

    function iniciarJuego() {
      const velocidad = parseInt(document.getElementById("velocidadInput").value) * 1000;
      if (cartasBarajeadas.length === 0) barajearCartas();
      detenerJuego();
      cartaIndex = 0;
      intervalo = setInterval(() => {
        if (cartaIndex < cartasBarajeadas.length) {
          const carta = cartasBarajeadas[cartaIndex];
          mostrarCarta(carta);
          cantarCarta(carta.nombre, cartaIndex === 0);
          cartaIndex++;
        } else {
          detenerJuego();
        }
      }, velocidad);
    }

    function detenerJuego() {
      clearInterval(intervalo);
    }
  </script>
</body>
</html>